<!--
SPDX-License-Identifier: GPL-2.0-only

webui.html

Written by Michael Ortmann

Copyright (C) 2023 Eggheads Development Team
-->
<!DOCTYPE html>
<head><title>Eggdrop</title></head>
<body bgcolor="#000000" text="#00ff00">
  Eggdrop
  <pre id="out">
  </pre>
  <input id="d" type="text" class="b" onkeydown="b(this)" autofocus style="position:fixed;bottom:0;width:100%;"/>
  <script>
    var ws;
    function b(c) {
      if(event.key === "Enter") {
        if (typeof ws === "undefined") {
          ws = new WebSocket((location.protocol === "https:" ? "wss://" : "ws:") + location.host + "/w");
          ws.addEventListener('message', (event) => {
            console.log(event.data);
            document.getElementById('out').innerHTML =  document.getElementById('out').innerHTML + event.data;
          });
          ws.onopen = function() {
            ws.send(c.value);
            a.textContent = "Password: ";
            c.value = "";
          }
        }
        else {
          ws.send(c.value);
        }
      }
    }
  </script>
</body>
